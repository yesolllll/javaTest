<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">

					<!-- resultType은 리턴 타입 -->
					<!-- parameterType는 받아오는 타입 -->
<select id="selectList" resultType="chap09.MemberVO">
	select MNO, MNAME, EMAIL, CRE_DATE from MEMBERS order by MNO asc
</select>
<select id="login" resultType="chap09.MemberVO" parameterType="chap09.MemberVO">
	select MNO, MNAME, EMAIL, CRE_DATE from MEMBERS 
	where email=#{email} and pwd=#{pwd} 
				<!-- 	getter에서 get을 제외한 명 getPwd=> pwd -->
</select>
<select id="selectOne" resultType="chap09.MemberVO" parameterType="int">
	select MNO, MNAME, EMAIL, CRE_DATE from MEMBERS 
	where mno=#{mno}
</select>
<update id="update" parameterType="chap09.MemberVO">
	update MEMBERS 
	set mname=#{mname}, email=#{email}
	<if test="pwd !=''">,pwd=#{pwd}</if>
	where mno=#{mno}
</update>
<insert id="insert" parameterType="chap09.MemberVO"  useGeneratedKeys="true">
	insert into members (mname, email, pwd, cre_date, mod_date) values(#{mname}, #{email}, #{pwd}, now(), now())
	<selectKey keyProperty="mno" resultType="int" order="AFTER" >
	select last_insert_id()
			<!--마지막 아이디 값의 다음 값으로 등록  -->
	</selectKey>
</insert>

<insert id="insertSchool" parameterType="map">
	insert into school (members_mno, school, year) values (#{members_mno}, #{school}, #{year})
</insert>
</mapper>